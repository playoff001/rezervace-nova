<!doctype html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <title>Rezervační systém - Penzion</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // OPRAVA: Přesměrování ze starých URL formátů PŘED načtením Reactu
      (function() {
        const pathname = window.location.pathname;
        const uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
        
        // Rozděl URL na části
        const pathParts = pathname.split('/').filter(Boolean);
        
        // Pokud je to prázdná stránka nebo root, nech to projít (zobrazí se výběr pokojů)
        if (pathParts.length === 0) {
          return;
        }
        
        // Hlavní kontrola starých URL formátů
        let shouldRedirect = false;
        
        if (pathParts.length >= 2) {
          const firstPart = pathParts[0];
          const secondPart = pathParts[1];
          
          // /reservace/{UUID} - starý formát se "s" (vždy přesměruj, protože nový formát je "rezervace" bez "s")
          if (firstPart === 'reservace' && uuidPattern.test(secondPart)) {
            shouldRedirect = true;
            console.log('[index.html] Old /reservace/{UUID} format detected, redirecting to root:', pathname);
          }
          
          // /admin/reservace/{UUID} - starý admin detail se "s"
          if (firstPart === 'admin' && pathParts.length >= 3 && pathParts[1] === 'reservace' && uuidPattern.test(pathParts[2])) {
            shouldRedirect = true;
            console.log('[index.html] Old /admin/reservace/{UUID} format detected, redirecting to root:', pathname);
          }
        }
        
        // Regex kontrola jako záloha
        if (!shouldRedirect) {
          // /reservace/{nějaký-uuid-formát} - starý formát se "s"
          if (/^\/reservace\/[0-9a-f-]{20,}$/i.test(pathname)) {
            shouldRedirect = true;
            console.log('[index.html] Old /reservace/ format detected by regex, redirecting to root:', pathname);
          }
          
          // /admin/reservace/{nějaký-uuid-formát}
          if (/^\/admin\/reservace\/[0-9a-f-]{20,}$/i.test(pathname)) {
            shouldRedirect = true;
            console.log('[index.html] Old /admin/reservace/ format detected by regex, redirecting to root:', pathname);
          }
        }
        
        if (shouldRedirect) {
          window.location.replace('/');
          return;
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


